---
layout: post
title:  "Evolving a Pair of Scissors"
date:   2015-02-23 15:37:16 -0600
categories: tech
short: I solved an NP-HARD problem with digital life! Well, depending on how satisfied you are with my definition of 'solved' and depending on your definition of 'life'.
---
I solved an NP-HARD problem with digital life! Well, depending on how satisfied you are with my definition of 'solved' and depending on your definition of 'life'.

Our team of NFS researchers at Knox was working on this problem of bisection bandwidth in very large graphs. This involves taking a selection (half) of the nodes in a graph and then seeing what is the sum of the weights of the edges which cross halves. For an abitrary graph, the way to solve this is to exhaustively search every possible grouping of half the nodes. Of course, this takes for ever. We came up with some clever techniques for parallelizing the process but this had no real effect on the runtime of larger graphs. So why not try another approach?

I mentioned in previous posts that I've been looking into the digital lift platform Avida. I spent a few weeks reading the relevent literature- just about every publication with the name Charles Ofria on it- in order to get a good idea of the current state of digital evolution. Long story short, I realized that digital evolution wasn't useful for me as a computer scientist unless I had a problem I was trying to solve. This is when I decided to take a second look at the bisection problem and ask, "Can we evolve a general solution to the bisection problem for Dragonfly graphs?"

So I just introduced a new term here, "Dragonfly". Dragonfly is a very specific layout of a graph consisting of several subgraphs which are cliques. These subgraphs have exactly one connection to other subgraphs. It's actually quite beautiful when visualized by Mathematica.

The cool thing about these graphs is that they have a lot of structure, a lot of regularity. This means that our problem is probably not actually NP-Hard and that there is probably a general algorithm for choosing the nodes which make up the bisection. We couldn't come up with the solution to that problem while researching over our winter break, but now I'm trying to answer the question of whether or not we can evolve it.

<a href="/assets/dragonfly42.png"><img src="/assets/dragonfly42.png" align="right" alt="dragonfly graph drawn in Mathematica" style="width:128px;height:128px;"/></a>

It turns out to be very easy to evolve a specific solution. What I mean by a specific solution is that Dragonfly graphs can come in all different sizes but their are 2 independent variables used when describing a dragonfly: the number of nodes in a clique, and the number of outgoing connections of a node. You can see that because of the rule that says every clique is connected to each other clique exactly once, that the total number of outgoing connections per clique must determine the number of cliques! So I experimented evolving solutions to dragonflies which we had previously solved with brute force. Setting up this program was trivial because we already had the main components of a successful genetic algorithm. The fitness function was simply the sum of the cross-bisection edge weights. The state of the organism was simply the selection of nodes. All I had to do was write the program to keep track of some selections, delete poor-performers, and reproduce and mutate the good ones. 

So now for some early results. I solved for the 4,2 case, meaning 4 nodes per clique with 2 outgoing connections per node. To solve by brute force, it takes about 7 minutes on my laptop. To solve by evolving the solution, it takes less than 100ms. Of course the only reason I know it's solved is because I stop the program when it finds the optimal solution. However, this is exciting because it proves that this is an effective technique and it can be used to estimate the bisections of very large dragonflies very quickly. So even with this Saturday morning project, we've breathed new life into this research project. However, what I'm more excited about is the prospect of evolving an organism whose state is instructions for selecting nodes. What gets evolved is how it is making node choices instead of just its choices. This means that we'd be evolving an algorithm, not a selection. I've already gotten a first version working, but it's not performing better than the specific-case genetic algorithm. However, it will be worth the effort of getting it to work because it has greater application in then finding the mathematical formula for the bisection of an arbitrary dragonfly, which in some ways was the goal of our research team.
